---
import Base from '../../layouts/Base.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import { solutionPages, getSolutionBySlug, pickTools } from '../../lib/programmatic.js';

export async function getStaticPaths() { return solutionPages.map((p) => ({ params: { slug: p.slug } })); }

const { slug } = Astro.params;
const page = getSolutionBySlug(slug);
if (!page) throw new Error(`Solution page not found: ${slug}`);

const canonical = `https://aitraining.directory/solutions/${slug}/`;
const tools = pickTools(slug.length % 8, 6);

const rolloutPlans = {
  'use-case': [
    'Week 1: pick one high-friction workflow and define success metrics (time-to-publish, completion, quality).',
    'Week 2: pilot tool stack with one training owner and one stakeholder reviewer.',
    'Week 3: codify SOP, governance checkpoints, and update cadence before scaling.'
  ],
  role: [
    'Define your role-specific outcomes and where current tooling blocks execution.',
    'Run a focused tool trial tied to one recurring deliverable your team ships every week.',
    'Create an operating playbook: ownership, QA standard, and KPI dashboard for handoff.'
  ],
  industry: [
    'Prioritize compliance/risk workflows where consistency matters most.',
    'Pilot with region or business unit that can produce measurable operational lift quickly.',
    'Scale with documented controls, audit evidence, and quarterly retraining calendar.'
  ]
};

const relatedLinks = {
  'use-case': [
    { label: 'Compare leading options', href: '/compare/' },
    { label: 'Explore all solution pages', href: '/solutions/' },
    { label: 'Browse by tool category', href: '/categories/' }
  ],
  role: [
    { label: 'Role-specific comparison guides', href: '/compare/' },
    { label: 'Implementation solution library', href: '/solutions/' },
    { label: 'Submit a tool your team uses', href: '/submit/' }
  ],
  industry: [
    { label: 'Industry-neutral comparison pages', href: '/compare/' },
    { label: 'Cross-functional L&D solutions', href: '/solutions/' },
    { label: 'Founding partner placement', href: '/advertise/' }
  ]
};

const faq = [
  {
    q: `How should ${page.label.toLowerCase()} teams shortlist AI tools?`,
    a: 'Start with one workflow bottleneck, run a 2-week pilot, and measure cycle-time reduction before broader rollout.'
  },
  {
    q: 'What matters most for L&D buyers?',
    a: 'Version control, collaboration, integration with existing systems, and ease of updating training assets over time.'
  },
  {
    q: 'How do we keep quality high while scaling output?',
    a: 'Use standard templates, assign clear approvers, and require a lightweight QA pass before each publish cycle.'
  }
];

const jsonLd = {
  '@context': 'https://schema.org',
  '@graph': [
    { '@type': 'CollectionPage', name: page.title, description: page.meta, url: canonical },
    {
      '@type': 'FAQPage',
      mainEntity: faq.map((item) => ({
        '@type': 'Question',
        name: item.q,
        acceptedAnswer: { '@type': 'Answer', text: item.a }
      }))
    }
  ]
};
---
<Base title={page.title} description={page.meta} canonical={canonical} jsonLd={jsonLd}>
  <Breadcrumbs items={[{ label: 'Home', href: '/' }, { label: 'Solutions', href: '/solutions/' }, { label: page.label, href: `/solutions/${slug}/` }]} />

  <section class="hero">
    <span class="eyebrow">{page.type.replace('-', ' ')} strategy page</span>
    <h1 style="margin-top:0.8rem;">{page.title}</h1>
    <p class="muted">{page.intro}</p>
  </section>

  <section class="section">
    <h2>Recommended tools to evaluate</h2>
    <div class="grid">
      {tools.map((tool) => (
        <article class="card">
          <div><span class="badge">{tool.category}</span><span class="badge">{tool.pricing}</span></div>
          <h3><a href={`/tool/${tool.slug}/`}>{tool.name}</a></h3>
          <p>{tool.summary}</p>
        </article>
      ))}
    </div>
  </section>

  <section class="section">
    <h2>30-day rollout plan</h2>
    <ul>
      {(rolloutPlans[page.type] || rolloutPlans['use-case']).map((step) => <li>{step}</li>)}
    </ul>
  </section>

  <section class="section">
    <h2>Evaluation checklist</h2>
    <ul>
      <li>Does the tool reduce content production cycle time for L&D?</li>
      <li>Can training managers update assets without vendor dependency?</li>
      <li>Is governance clear for compliance-sensitive workflows?</li>
      <li>Can this integrate into current knowledge and LMS systems?</li>
      <li>Are localization and accessibility workflows supportable at scale?</li>
    </ul>
  </section>

  <section class="section">
    <h2>Related planning routes</h2>
    <div class="chips">
      {(relatedLinks[page.type] || relatedLinks['use-case']).map((item) => (
        <a class="chip" href={item.href}>{item.label}</a>
      ))}
    </div>
  </section>

  <section class="section">
    <h2>FAQ</h2>
    {faq.map((item) => (
      <>
        <h3>{item.q}</h3>
        <p>{item.a}</p>
      </>
    ))}
  </section>
</Base>
